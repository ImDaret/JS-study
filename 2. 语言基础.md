# 变量

## var 声明

### var 声明的作用域

使用 var 声明的变量将会变成该函数内部的局部变量，比如下面声明的变量将在函数退出时被销毁：

```javascript
function test() {
  var message = "hi";
}
test();
console.log(message); //出错！;
```

假如不用 var 关键字声明，该变量将会变成全局变量

```javascript
function test() {
  message = "hi";
}
test();
console.log(message); // “hi”;
```

### var 声明提升

下面这段代码不会报错。

```javascript
function foo() {
  console.log(message); // undefined
  var message = "hi";
}
foo();
```

之所以不报错是因为可以把它理解为如下代码

```javascript
function foo() {
  var message;
  console.log(message);
  message = "hi";
}
```

这就是提升，用 var 定义的变量都会被提升到函数作用域最顶部。此外，反复声明同一个变量也没有问题

## let 声明

### 作用域不同

用 var 声明的作用域是函数作用域，用 let 声明的作用域是块作用域，比如下面：

```javascript
if (true) {
  var message = "hello";
  let result = "world";
  console.log(message); // 'hello'
  console.log(result); // 'world'
}
console.log(message); // 'hello'
console.log(result); // 报错 result is not defined
```

### 不能重复声明

```javascript
let age = 20;
let age = 30; // 报错 'age' has already been declared
```

### 在不同的块中可以重复声明

```javascript
let age = 20;
if (true) {
  let age = 30;
  console.log(age); // 30
}
console.log(age); // 20
```

### 暂时性死区（不会变量提升）

```javascript
console.log(varAge); // undefined
console.log(age); // 报错
let age = 20;
var varAge = 30;
```

### 不会成为 window 对象属性

```javascript
var varAge = 30;
console.log(window.varAge); // 30
let age = 20;
console.log(window.age); // 20
```

### for 循环中的 let 声明

```javascript
for (let i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 0); // 0 1 2 3 4
}
console.log(i); // 报错 not defined
for (var i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 0); // 5 5 5 5 5
}
console.log(i); // 5
```

## const 声明

1. 与 let 用法基本相同，但是定义变量的同时必须初始化，而且不允许修改。

2. const 声明的限制只是它指向的变量的引用，换句话说，const 声明的对象是可以修改的。

3. for 循环涉及到自增时，无法使用 const 声明，但是`for...in`,`for...of`可以。

```javascript
for (const key in { a: 1, b: 2 }) {
  console.log(key); // a b
}

for (const value of [1, 2, 3, 4, 5]) {
  console.log(value); // 1 2 3 4 5
}
```

## 数据类型

### typeof 操作符

返回值：

1. undefined
2. boolean
3. string
4. number
5. object
6. function
7. symbol

typeof 是一个操作符，它可以使用参数也可以不使用参数

```javascript
const message = "myMessage";
console.log(typeof message); // string
console.log(typeof message); //string
console.log(typeof 95); // number
console.log(typeof null); // object
console.log(typeof function () {}); // function
```

### Undefined

神奇操作

```javascript
let message; // message被声明，值为undefined
let age; // 确保没有声明过这个变量

console.log(message); // undefined
console.log(age); // 报错
console.log(typeof message); // undefined
console.log(typeof age); // undefined
```

上面的例子中，虽然 age 没有声明，但是 typeof 检测出来的值还是 undefined

### Null

从逻辑上来说，Null 其实就是一个空对象，所以定义要保存对象的变量时，可以使用 null 来初始化。

### Boolean

要将其他值转换成布尔值可以使用`Boolean()`转换函数

| 数据类型  | 转换为 true 的值 | 转换为 false 的值 |
| :-------: | :--------------: | :---------------: |
|  String   |    非空字符串    |    ""空字符串     |
|  Number   |      非零值      |      0、NAN       |
|  Object   |     任意对象     |       null        |
| Undefined |       没有       |     undefined     |

### Number
